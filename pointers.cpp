#include <iostream>
#include "pointers.h"

namespace Tasks_Pointers {

    // ======================== Функции для задач ========================

    // Увеличивает значение переменной через указатель
    void increment(int* ptr) {
        ++(*ptr);
        std::cout << "Значение после увеличения: " << *ptr << '\n';
    }

    // Меняет значения двух переменных местами через указатели
    void swap(int* x, int* y) {
        int tmp = *x;
        *x = *y;
        *y = tmp;
    }

    // ======================== Решения задач ============================

    // Задача 1: Присваивание значения через указатель
    void task1() {
        int a = 10;
        int* p = &a;
        *p = 20; // Изменяем значение переменной через указатель
        std::cout << "a = " << *p << ", адрес переменной a = " << p << '\n';
    }

    // Задача 2: Обратный вывод элементов массива
    void task2() {
        int arr[5] = { 1, 2, 3, 4, 5 };

        // Через sizeof
        std::cout << "Обратный вывод массива через sizeof: ";
        for (int* ptr = arr + (sizeof(arr) / sizeof(arr[0])) - 1; ptr >= arr; --ptr)
            std::cout << *ptr << ' ';
        std::cout << '\n';

        // Через прямой индекс
        std::cout << "Обратный вывод массива через индекс: ";
        for (int* ptr = arr + 4; ptr >= arr; --ptr)
            std::cout << *ptr << ' ';
        std::cout << '\n';
    }

    // Задача 3: Увеличение числа через функцию с указателем
    void task3() {
        int a = 15;
        int* p = &a;
        increment(p); // Передаем указатель в функцию increment
    }

    // Задача 4: Обмен значений двух переменных через функцию
    void task4() {
        int a = 5;
        int b = 10;
        std::cout << "До обмена: a = " << a << ", b = " << b << '\n';
        swap(&a, &b); // Передаем адреса переменных в функцию swap
        std::cout << "После обмена: a = " << a << ", b = " << b << '\n';
    }

    // ======================== Меню для вызова задач =====================
    void menu() {
        int choice = 0;
        do {
            std::cout << "\n=== Меню ===\n";
            std::cout << "1. Задача 1: Присваивание значения через указатель\n";
            std::cout << "2. Задача 2: Обратный вывод массива\n";
            std::cout << "3. Задача 3: Увеличение числа через функцию с указателем\n";
            std::cout << "4. Задача 4: Обмен значений двух переменных\n";
            std::cout << "0. Выход\n";
            std::cout << "Введите номер задачи: ";
            std::cin >> choice;

            switch (choice) {
            case 1: task1(); break;
            case 2: task2(); break;
            case 3: task3(); break;
            case 4: task4(); break;
            case 0: std::cout << "Выход из программы...\n"; break;
            default: std::cout << "Неверный выбор. Попробуйте снова.\n";
            }
        } while (choice != 0);
    }

} // namespace Tasks_Pointers
